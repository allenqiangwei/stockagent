# ğŸ“ˆ Aè‚¡é‡åŒ–äº¤æ˜“ç³»ç»Ÿ

ä¸€ä¸ªåŸºäºPythonçš„Aè‚¡é‡åŒ–äº¤æ˜“è¾…åŠ©ç³»ç»Ÿï¼Œé€šè¿‡æ³¢æ®µäº¤æ˜“ä¸è¶‹åŠ¿è·Ÿè¸ªç­–ç•¥ï¼Œç»“åˆAIæ¨¡å‹å¢å¼ºä¿¡å·ï¼Œå®ç°æ•°æ®é©±åŠ¨çš„äº¤æ˜“å†³ç­–ã€‚

![Python](https://img.shields.io/badge/Python-3.11+-blue.svg)
![Tests](https://img.shields.io/badge/Tests-305%20passed-brightgreen.svg)
![License](https://img.shields.io/badge/License-MIT-yellow.svg)

## âœ¨ åŠŸèƒ½ç‰¹æ€§

### ğŸ“Š æ•°æ®å±‚ (Phase 1)
- **å¤šæ•°æ®æºæ”¯æŒ**: TuShare (ä¸») + AkShare/Baostock (å¤‡ç”¨)
- **é«˜æ•ˆå­˜å‚¨**: Parquetåˆ—å¼å­˜å‚¨ + SQLiteå…ƒæ•°æ®ç®¡ç†
- **å¢é‡æ›´æ–°**: è‡ªåŠ¨æ£€æµ‹å¹¶æ›´æ–°æœ€æ–°æ•°æ®
- **æ–°é—»çˆ¬è™«**: ä¸œæ–¹è´¢å¯Œæ–°é—»æŠ“å–ä¸æƒ…æ„Ÿåˆ†æ

### ğŸ“ˆ ç­–ç•¥å±‚ (Phase 2)
- **æŠ€æœ¯æŒ‡æ ‡**: è¶‹åŠ¿(SMA/EMA/MACD/ADX)ã€åŠ¨é‡(RSI/KDJ/CCI)ã€æˆäº¤é‡(OBV/MFI/VWAP)
- **äº¤æ˜“ç­–ç•¥**: æ³¢æ®µç­–ç•¥ + è¶‹åŠ¿è·Ÿè¸ªç­–ç•¥
- **ä¿¡å·åˆ†ç±»**: 5çº§ä¿¡å·(å¼ºä¹°/å¼±ä¹°/æŒæœ‰/å¼±å–/å¼ºå–)
- **MLå¢å¼º**: XGBoostæ¨¡å‹æå‡ä¿¡å·ç½®ä¿¡åº¦

### ğŸ›¡ï¸ é£æ§å±‚ (Phase 3)
- **é£é™©çŠ¶æ€**: RISK_ON / NEUTRAL / RISK_OFF ä¸‰æ€ç®¡ç†
- **ä»“ä½è®¡ç®—**: ä¿¡å·å¼ºåº¦ Ã— æ³¢åŠ¨ç‡è°ƒæ•´ Ã— é£é™©ç³»æ•°
- **æ­¢æŸæœºåˆ¶**: å›ºå®šæ­¢æŸ(5%) + ATRç§»åŠ¨æ­¢æŸ(2x) + åˆ©æ¶¦é”å®šé˜¶æ¢¯

### ğŸ–¥ï¸ ä»ªè¡¨ç›˜ (Phase 4)
- **å¸‚åœºæ¦‚è§ˆ**: é£é™©çŠ¶æ€ã€æŒ‡æ•°èµ°åŠ¿ã€è¡Œä¸šçƒ­åŠ›å›¾
- **ä¿¡å·æŒä»“**: ä¹°å–ä¿¡å·ã€æŒä»“æ˜ç»†ã€ç›ˆäºåˆ†æ
- **æƒé™ç®¡ç†**: ç®¡ç†å‘˜/åªè¯»ç”¨æˆ·è§’è‰²æ§åˆ¶

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚
- Python 3.11+
- macOS / Linux / Windows

### ä¸€é”®å®‰è£…

```bash
# å…‹éš†é¡¹ç›®
git clone https://github.com/allenqiangwei/stockagent.git
cd stockagent

# å®‰è£…ä¾èµ–ï¼ˆè‡ªåŠ¨åˆ›å»ºè™šæ‹Ÿç¯å¢ƒï¼‰
./start.sh install

# ç¼–è¾‘é…ç½®æ–‡ä»¶ï¼Œå¡«å…¥TuShare Token
vim config/config.yaml

# å¯åŠ¨ç³»ç»Ÿ
./start.sh
```

### Windowsç”¨æˆ·

```cmd
# å®‰è£…ä¾èµ–
start.bat install

# å¯åŠ¨ç³»ç»Ÿ
start.bat
```

## ğŸ“– ä½¿ç”¨æ–¹æ³•

### å¯åŠ¨å‘½ä»¤

| å‘½ä»¤ | è¯´æ˜ |
|------|------|
| `./start.sh` | å¯åŠ¨ä»ªè¡¨ç›˜ |
| `./start.sh install` | å®‰è£…æ‰€æœ‰ä¾èµ– |
| `./start.sh update` | æ›´æ–°æ•°æ®åå¯åŠ¨ |
| `./start.sh data` | ä»…æ›´æ–°æ•°æ® |
| `./start.sh test` | è¿è¡Œæµ‹è¯• |

### è®¿é—®ä»ªè¡¨ç›˜

å¯åŠ¨åè®¿é—®: **http://localhost:8501**

é»˜è®¤è´¦å·:
- ç®¡ç†å‘˜: `admin` / `admin123`
- è§‚å¯Ÿè€…: `viewer` / `viewer123`

## ğŸ“ é¡¹ç›®ç»“æ„

```
stockagent/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ collectors/          # æ•°æ®é‡‡é›†å™¨
â”‚   â”‚   â”œâ”€â”€ tushare_collector.py
â”‚   â”‚   â”œâ”€â”€ akshare_collector.py
â”‚   â”‚   â””â”€â”€ baostock_collector.py
â”‚   â”œâ”€â”€ indicators/          # æŠ€æœ¯æŒ‡æ ‡
â”‚   â”‚   â”œâ”€â”€ trend_indicators.py
â”‚   â”‚   â”œâ”€â”€ momentum_indicators.py
â”‚   â”‚   â””â”€â”€ volume_indicators.py
â”‚   â”œâ”€â”€ signals/             # ä¿¡å·ç”Ÿæˆ
â”‚   â”‚   â”œâ”€â”€ swing_strategy.py
â”‚   â”‚   â”œâ”€â”€ trend_strategy.py
â”‚   â”‚   â””â”€â”€ signal_combiner.py
â”‚   â”œâ”€â”€ ml_models/           # æœºå™¨å­¦ä¹ 
â”‚   â”‚   â”œâ”€â”€ feature_engineer.py
â”‚   â”‚   â””â”€â”€ model_trainer.py
â”‚   â”œâ”€â”€ risk_control/        # é£é™©æ§åˆ¶
â”‚   â”‚   â”œâ”€â”€ risk_state_manager.py
â”‚   â”‚   â”œâ”€â”€ position_calculator.py
â”‚   â”‚   â””â”€â”€ stop_loss_manager.py
â”‚   â”œâ”€â”€ dashboard/           # Webä»ªè¡¨ç›˜
â”‚   â”‚   â”œâ”€â”€ app.py
â”‚   â”‚   â”œâ”€â”€ data_service.py
â”‚   â”‚   â””â”€â”€ pages/
â”‚   â””â”€â”€ storage/             # æ•°æ®å­˜å‚¨
â”‚       â”œâ”€â”€ parquet_storage.py
â”‚       â””â”€â”€ database.py
â”œâ”€â”€ tests/                   # æµ‹è¯•æ–‡ä»¶
â”œâ”€â”€ config/                  # é…ç½®æ–‡ä»¶
â”œâ”€â”€ data/                    # æ•°æ®ç›®å½•
â”œâ”€â”€ logs/                    # æ—¥å¿—ç›®å½•
â”œâ”€â”€ start.sh                 # å¯åŠ¨è„šæœ¬(Unix)
â”œâ”€â”€ start.bat                # å¯åŠ¨è„šæœ¬(Windows)
â””â”€â”€ requirements.txt         # ä¾èµ–åˆ—è¡¨
```

## âš™ï¸ é…ç½®è¯´æ˜

é…ç½®æ–‡ä»¶: `config/config.yaml`

```yaml
# æ•°æ®æºé…ç½®
data_sources:
  tushare:
    token: "YOUR_TUSHARE_TOKEN"  # å¿…å¡«

# é£é™©æ§åˆ¶å‚æ•°
risk_control:
  fixed_stop_pct: 0.05        # å›ºå®šæ­¢æŸ 5%
  atr_multiplier: 2.0         # ATRå€æ•°
  max_position_pct: 0.25      # å•åªæœ€å¤§ä»“ä½ 25%
  target_total_pct: 0.60      # ç›®æ ‡æ€»ä»“ä½ 60%
  max_stocks: 10              # æœ€å¤šæŒæœ‰è‚¡ç¥¨æ•°

# ä¿¡å·å‚æ•°
signals:
  min_score: 60               # æœ€ä½ä¿¡å·åˆ†æ•°
  swing_weight: 0.35          # æ³¢æ®µç­–ç•¥æƒé‡
  trend_weight: 0.35          # è¶‹åŠ¿ç­–ç•¥æƒé‡
  ml_weight: 0.30             # MLç­–ç•¥æƒé‡
```

## ğŸ§ª æµ‹è¯•

```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
./start.sh test

# æˆ–ç›´æ¥ä½¿ç”¨pytest
python -m pytest tests/ -v
```

### æµ‹è¯•è¦†ç›–

| æ¨¡å— | æµ‹è¯•æ•° |
|------|--------|
| Phase 1: æ•°æ®å±‚ | 43 |
| Phase 2: ç­–ç•¥å±‚ | 160 |
| Phase 3: é£æ§å±‚ | 62 |
| Phase 4: ä»ªè¡¨ç›˜ | 40 |
| **æ€»è®¡** | **305** |

## ğŸ“Š ç³»ç»Ÿæ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      Web Dashboard                          â”‚
â”‚                    (Streamlit + Plotly)                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                     Risk Controller                         â”‚
â”‚         (State Manager + Position + Stop Loss)              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                    Signal Generator                         â”‚
â”‚        (Swing + Trend + ML Enhancement)                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                  Technical Indicators                       â”‚
â”‚          (Trend + Momentum + Volume)                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                    Data Layer                               â”‚
â”‚     (TuShare + AkShare + Parquet + SQLite)                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ”§ æŠ€æœ¯æ ˆ

- **æ•°æ®å¤„ç†**: Pandas, NumPy, PyArrow
- **æŠ€æœ¯åˆ†æ**: TA-Lib
- **æœºå™¨å­¦ä¹ **: XGBoost, Scikit-learn
- **Webæ¡†æ¶**: Streamlit
- **å¯è§†åŒ–**: Plotly
- **æ•°æ®æº**: TuShare, AkShare, Baostock

## âš ï¸ å…è´£å£°æ˜

æœ¬ç³»ç»Ÿä»…ä¾›å­¦ä¹ å’Œç ”ç©¶ä½¿ç”¨ï¼Œä¸æ„æˆä»»ä½•æŠ•èµ„å»ºè®®ã€‚è‚¡å¸‚æœ‰é£é™©ï¼ŒæŠ•èµ„éœ€è°¨æ…ã€‚ä½¿ç”¨æœ¬ç³»ç»Ÿè¿›è¡Œçš„ä»»ä½•äº¤æ˜“å†³ç­–ï¼Œç”¨æˆ·éœ€è‡ªè¡Œæ‰¿æ‹…å…¨éƒ¨é£é™©å’Œè´£ä»»ã€‚

## ğŸ“„ è®¸å¯è¯

MIT License - è¯¦è§ [LICENSE](LICENSE) æ–‡ä»¶

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

---

**ä½œè€…**: Allen Qiang
**GitHub**: [@allenqiangwei](https://github.com/allenqiangwei)
